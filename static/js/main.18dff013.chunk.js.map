{"version":3,"sources":["components/Chat/Header.module.css","components/Chat/Message.module.css","components/Login/User.module.css","components/Chat/MessageList.module.css","components/Login/Login.module.css","components/Login/Target.module.css","components/Chat/ChatForm.module.css","components/Chat/Chat.module.css","redux store/login-reducer.js","redux store/chat-reducer.js","context store/peer-context.js","redux store/index.js","components/Login/Username.js","components/Login/Interval.js","components/Login/User.js","components/Login/TargetUsername.js","components/Login/Target.js","components/Login/Login.js","components/Chat/Header.js","components/Chat/Message.js","components/Chat/MessageList.js","components/Chat/ChatForm.js","components/Chat/Chat.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","loginSlice","createSlice","name","initialState","userName","userTimer","userStatus","targetName","targetStatus","reducers","setUserTimer","state","action","payload","setUserName","setUserStatus","console","log","setTargetUsername","setTargetStatus","loginActions","actions","chatSlice","chatDuration","messages","addMessage","push","id","length","user","interval","message","removeMessage","filter","item","updateChatDuration","chatActions","PeerContext","createContext","userConnection","targetConnection","connectUser","reconnectUser","disconnectUser","connectTarget","disconnectTarget","PeerProvider","props","useState","userConn","setUserConn","targetConn","setTargetConn","connections","setConnection","dispatch","useDispatch","useSelector","login","useEffect","on","conn","prevConnections","data","err","Provider","value","username","Peer","reconnect","destroy","target","connIndex","findIndex","peer","connect","close","sendMessage","send","children","store","configureStore","reducer","loginReducer","chat","chatReducer","Username","Form","Group","className","controlId","Label","Control","type","placeholder","onChange","usernameHandler","Interval","Select","intervalHandler","User","setUsername","setInterval","btnState","setBtnState","useContext","onSubmit","event","preventDefault","classes","login__form","Button","variant","TargetUsername","targetUsernameHandler","Feedback","Target","targetUsername","connect__btn","Login","Card","form","Header","header","header__logo","header__btn","onClick","Message","duration","setDuration","percentage","setPercentage","setTimeout","message__text","ProgressBar","now","message__timer","MessageList","messages__container","messages__feed","map","msg","ChatForm","setMessage","chatForm","as","Chat","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"sFACAA,EAAOC,QAAU,CAAC,OAAS,uBAAuB,aAAe,+B,mBCAjED,EAAOC,QAAU,CAAC,QAAU,yBAAyB,cAAgB,+BAA+B,eAAiB,kC,mBCArHD,EAAOC,QAAU,CAAC,YAAc,0BAA0B,WAAa,yBAAyB,YAAc,4B,mBCA9GD,EAAOC,QAAU,CAAC,oBAAsB,yCAAyC,eAAiB,sC,mBCAlGD,EAAOC,QAAU,CAAC,KAAO,sB,mBCAzBD,EAAOC,QAAU,CAAC,aAAe,+B,mBCAjCD,EAAOC,QAAU,CAAC,SAAW,6B,mBCA7BD,EAAOC,QAAU,CAAC,KAAO,qB,yKCSnBC,EAAaC,YAAY,CAC7BC,KAAM,QACNC,aAVkB,CAClBC,SAAU,GACVC,UAAW,EACXC,WAAY,GACZC,WAAY,GACZC,aAAc,IAMdC,SAAU,CACRC,aADQ,SACKC,EAAOC,GAClBD,EAAMN,UAAYO,EAAOC,SAE3BC,YAJQ,SAIIH,EAAOC,GACjBD,EAAMP,SAAWQ,EAAOC,SAE1BE,cAPQ,SAOMJ,EAAOC,GACnBD,EAAML,WAAaM,EAAOC,QAC1BG,QAAQC,IAAI,gBAAkBL,EAAOC,UAEvCK,kBAXQ,SAWUP,EAAOC,GACvBD,EAAMJ,WAAaK,EAAOC,SAE5BM,gBAdQ,SAcQR,EAAOC,GACrBD,EAAMH,aAAeI,EAAOC,QAC5BG,QAAQC,IAAI,kBAAoBL,EAAOC,aAKhCO,EAAepB,EAAWqB,QACxBrB,IAAf,QCpBMsB,EAAYrB,YAAY,CAC5BC,KAAM,OACNC,aAPiB,CACjBoB,aAAc,EACdC,SAAU,IAMVf,SAAU,CACRgB,WADQ,SACGd,EAAOC,GAEhBD,EAAMa,SAASE,KAAK,CAClBC,GAAIhB,EAAMa,SAASI,SACnBC,KAAMjB,EAAOC,QAAQgB,KACrBC,SAAUlB,EAAOC,QAAQiB,SACzBC,QAASnB,EAAOC,QAAQkB,WAG5BC,cAVQ,SAUMrB,EAAOC,GAEnBD,EAAMa,SAAWb,EAAMa,SAASS,QAC9B,SAACC,GAAD,OAAUA,EAAKP,KAAOf,EAAOC,YAGjCsB,mBAhBQ,SAgBWxB,EAAOC,GACxBD,EAAMY,aAAeX,EAAOC,YAKrBuB,EAAcd,EAAUD,QACtBC,IAAf,Q,wBCnCMe,EAAcC,wBAAc,CAChCC,eAAgB,KAChBC,iBAAkB,KAClBC,YAAa,aACbC,cAAe,aACfC,eAAgB,aAChBC,cAAe,aACfC,iBAAkB,eAGPC,EAAe,SAAUC,GACpC,MAAgCC,mBAAS,MAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAAoCF,mBAAS,MAA7C,mBAAOG,EAAP,KAAmBC,EAAnB,KACA,EAAqCJ,mBAAS,IAA9C,mBAAOK,EAAP,KAAoBC,EAApB,KAEMC,EAAWC,cACX3B,EAAO4B,aAAY,SAAC9C,GAAD,OAAWA,EAAM+C,MAAMtD,YAC1C0B,EAAW2B,aAAY,SAAC9C,GAAD,OAAWA,EAAM+C,MAAMrD,aAepDsD,qBAAU,WACS,OAAbV,IACJA,EAASW,GAAG,QAAQ,SAAUjC,GAC5B4B,EAASnC,EAAaL,cAAc,YAGtCkC,EAASW,GAAG,cAAc,SAAUC,GAClC7C,QAAQC,IAAI4C,GACZP,GAAc,SAACQ,GAAD,4BAAyBA,GAAzB,CAA0CD,UAG1DZ,EAASW,GAAG,SAAS,WACnBL,EAASnC,EAAaL,cAAc,aAGtCkC,EAASW,GAAG,gBAAgB,WAC1BL,EAASnC,EAAaL,cAAc,oBAGtCkC,EAASW,GAAG,SAAS,WACnBL,EAASnC,EAAaL,cAAc,gBAErC,CAACkC,EAAUM,IAiBdI,qBAAU,WACW,OAAfR,IACJA,EAAWS,GAAG,QAAQ,SAAUG,GAC9B/C,QAAQC,IAAI,oBACZsC,EAASnB,EAAYX,WAAWsC,OAGlCZ,EAAWS,GAAG,QAAQ,WACpBL,EAASnC,EAAaD,gBAAgB,kBAGxCgC,EAAWS,GAAG,SAAS,WACrBL,EAASnC,EAAaD,gBAAgB,aAGxCgC,EAAWS,GAAG,SAAS,SAAUI,GAC/BT,EAASnC,EAAaD,gBAAgB,gBAEvC,CAACgC,EAAYI,IAYhB,OACE,cAAClB,EAAY4B,SAAb,CACEC,MAAO,CACL3B,eAAgBU,EAChBT,iBAAkBW,EAClBV,YAvFqB,SAAC0B,EAAUrC,GACpCoB,EAAY,IAAIkB,IAAKD,IAErBZ,EAASnC,EAAaN,YAAYqD,IAClCZ,EAASnC,EAAaV,aAAaoB,KAoF/BY,cAlFsB,WAC1BO,EAASoB,aAkFL1B,eAhFwB,WAC5BM,EAASqB,WAgFL1B,cArDuB,SAAC2B,GAC5BnD,EAAaF,kBAAkBqD,GAC/B,IAAIC,EAAYnB,EAAYoB,WAAU,SAACZ,GAAD,OAAUA,EAAKa,OAASH,KAC9DvD,QAAQC,IAAIuD,IACO,IAAfA,GACFpB,EAAcC,EAAYmB,IAC1BjB,EAASnC,EAAaD,gBAAgB,gBAEtCiC,EAAcH,EAAS0B,QAAQJ,KA8C7B1B,iBA3C0B,WAC9BM,EAAWyB,SA2CPC,YApBqB,SAAU9C,GACnCoB,EAAW2B,KAAK,CACdjD,OACAC,WACAC,YAEFwB,EAASnB,EAAYX,WAAW,CAAEM,UAASD,cAC3Cd,QAAQC,IAAI,iBAAmBc,KAI/B,SAYGgB,EAAMgC,YAKE1C,IClHA2C,EAPDC,YAAe,CAC3BC,QAAS,CACPxB,MAAOyB,EACPC,KAAMC,K,sDCUKC,EAfE,SAAUvC,GACzB,OACE,eAACwC,EAAA,EAAKC,MAAN,CAAYC,UAAU,OAAOC,UAAU,eAAvC,UACE,cAACH,EAAA,EAAKI,MAAN,uBACA,cAACJ,EAAA,EAAKK,QAAN,CACEC,KAAK,OACL3F,KAAK,WACLgE,MAAOnB,EAAMmB,MACb4B,YAAY,iBACZC,SAAUhD,EAAMiD,sBCKTC,EAdE,SAAUlD,GACzB,OACE,eAACwC,EAAA,EAAKC,MAAN,CAAYC,UAAU,OAAOC,UAAU,cAAvC,UACE,cAACH,EAAA,EAAKI,MAAN,CAAYF,UAAU,YAAtB,2BACA,eAACF,EAAA,EAAKW,OAAN,CAAaH,SAAUhD,EAAMoD,gBAA7B,UACE,mDACA,wBAAQjC,MAAM,IAAd,uBACA,wBAAQA,MAAM,KAAd,wBACA,wBAAQA,MAAM,KAAd,+B,iBCmEOkC,EApEF,WACX,MAAgCpD,mBAAS,IAAzC,mBAAOmB,EAAP,KAAiBkC,EAAjB,KACA,EAAgCrD,mBAAS,IAAzC,mBAAOlB,EAAP,KAAiBwE,EAAjB,KACA,EAAgCtD,mBAAS,SAAzC,mBAAOuD,EAAP,KAAiBC,EAAjB,KAEM9B,EAAO+B,qBAAWpE,GAClB/B,EAAamD,aAAY,SAAC9C,GAAD,OAAWA,EAAM+C,MAAMpD,cAChDF,EAAWqD,aAAY,SAAC9C,GAAD,OAAWA,EAAM+C,MAAMtD,YAEpDuD,qBAAU,WACS,KAAbvD,GACFiG,EAAYjG,KAEb,CAACA,IAEJuD,qBAAU,WACR,OAAQrD,GACN,IAAK,GACL,IAAK,QACL,IAAK,QACHkG,EAAY,SACZ,MACF,IAAK,OACL,IAAK,aACHA,EAAY,UACZ,MACF,IAAK,eACHA,EAAY,gBAIf,CAAClG,IAsBJ,OACE,eAACiF,EAAA,EAAD,CAAMmB,SAbc,SAAUC,GAC9BA,EAAMC,iBAEW,UAAbL,EACF7B,EAAKjC,YAAY0B,EAAUrC,GACL,WAAbyE,EACT7B,EAAK/B,iBACiB,cAAb4D,GACT7B,EAAKhC,iBAKwB+C,UAAWoB,IAAQC,YAAlD,UACE,cAAC,EAAD,CAAU5C,MAAOC,EAAU6B,gBAtBP,SAAUW,GAChCN,EAAYM,EAAMpC,OAAOL,UAsBvB,cAAC,EAAD,CAAUiC,gBAnBU,SAAUQ,GAChCL,EAAYK,EAAMpC,OAAOL,UAmBvB,cAAC6C,EAAA,EAAD,CACEtB,UAAWoB,IAAQ,GAAD,OAAIN,EAAJ,UAClBS,QAAQ,UACRnB,KAAK,SAHP,SAKGU,QCpDMU,EAjBQ,SAAUlE,GAC/B,OACE,eAACwC,EAAA,EAAKC,MAAN,CAAYC,UAAU,OAAOC,UAAU,aAAvC,UACE,cAACH,EAAA,EAAKI,MAAN,CAAYF,UAAU,YAAtB,oBACA,cAACF,EAAA,EAAKK,QAAN,CACEC,KAAK,OACLC,YAAY,kBACZ5B,MAAOnB,EAAMmB,MACb6B,SAAUhD,EAAMmE,wBAElB,cAAC3B,EAAA,EAAKK,QAAQuB,SAAd,CAAuBtB,KAAK,UAA5B,wD,iBCmCSuB,EAvCA,WACb,MAA4CpE,mBAAS,IAArD,mBAAOqE,EAAP,KAAuBnG,EAAvB,KAEMX,EAAakD,aAAY,SAAC9C,GAAD,OAAWA,EAAM+C,MAAMnD,cAEtDoD,qBAAU,WACW,KAAfpD,GACFW,EAAkBX,KAEnB,CAACA,IAEJ,IAAMmE,EAAO+B,qBAAWpE,GAWxB,OACE,eAACkD,EAAA,EAAD,CAAMmB,SANc,SAAUC,GAC9BA,EAAMC,iBACNlC,EAAK9B,cAAcyE,IAInB,UACE,cAAC,EAAD,CACEnD,MAAOmD,EACPH,sBAbwB,SAAUP,GACtCzF,EAAkByF,EAAMpC,OAAOL,UAc7B,cAAC6C,EAAA,EAAD,CACEtB,UAAWoB,IAAQS,aACnBN,QAAQ,YACRnB,KAAK,SAHP,yBCtBS0B,EATD,WACZ,OACE,eAACC,EAAA,EAAD,CAAM/B,UAAWoB,IAAQY,KAAzB,UACE,cAAC,EAAD,IACA,cAAC,EAAD,Q,iBCiBSC,EArBA,WACb,IAAMhD,EAAO+B,qBAAWpE,GAKxB,OACE,sBAAKoD,UAAWoB,IAAQc,OAAxB,UACE,qBAAKlC,UAAWoB,IAAQe,aAAxB,kBACA,cAACb,EAAA,EAAD,CACEtB,UAAWoB,IAAQgB,YACnBb,QAAQ,UACRnB,KAAK,SACLiC,QAVoB,WACxBpD,EAAK7B,oBAKH,4B,yBCuBSkF,EA9BC,YAA4C,IAAhCpG,EAA+B,EAA/BA,GAAIE,EAA2B,EAA3BA,KAAME,EAAqB,EAArBA,QAASD,EAAY,EAAZA,SAC7C,EAAgCkB,mBAAS,GAAzC,mBAAOgF,EAAP,KAAiBC,EAAjB,KACA,EAAoCjF,mBAAS,GAA7C,mBAAOkF,EAAP,KAAmBC,EAAnB,KAEM/H,EAAWqD,aAAY,SAAC9C,GAAD,OAAWA,EAAM+C,MAAMtD,YAC9CmD,EAAWC,cAEXqC,EAAOhE,IAASzB,EAAW,OAAS,SAa1C,OAXAuD,qBAAU,WACJqE,EAAWlG,EACbsG,YAAW,WACTH,GAAY,SAACtH,GAAD,OAAWA,EAAQ,MAC/BwH,EAAeH,EAAWlG,EAAY,OACrC,KAEHyB,EAASnB,EAAYJ,cAAcL,MAEpC,CAACqG,EAAUlG,EAAUH,EAAI4B,IAG1B,eAACiE,EAAA,EAAD,CAAM/B,UAAWoB,IAAQ9E,QAAzB,UACE,4BAAI8D,IACJ,4BAAImC,IACJ,mBAAGvC,UAAWoB,IAAQwB,cAAtB,SAAsCtG,IACtC,cAACuG,EAAA,EAAD,CAAaC,IAAKL,EAAYzC,UAAWoB,IAAQ2B,qB,iBCTxCC,EAnBK,WAClB,IAAMjH,EAAWiC,aAAY,SAAC9C,GAAD,OAAWA,EAAMyE,KAAK5D,YACnD,OACE,qBAAKiE,UAAWoB,IAAQ6B,oBAAxB,SACE,qBAAKjD,UAAWoB,IAAQ8B,eAAxB,SACGnH,EAASoH,KAAI,SAACC,GAAD,OACZ,cAAC,EAAD,CAEElH,GAAIkH,EAAIlH,GACRE,KAAMgH,EAAIhH,KACVE,QAAS8G,EAAI9G,QACbD,SAAU+G,EAAI/G,UAJT+G,EAAIlH,Y,iBCwBNmH,EA5BE,WACf,MAA8B9F,mBAAS,IAAvC,mBAAOjB,EAAP,KAAgBgH,EAAhB,KAEMrE,EAAO+B,qBAAWpE,GAUxB,OACE,eAACkD,EAAA,EAAD,CAAMmB,SALqB,SAAUC,GACrCA,EAAMC,iBACNlC,EAAKG,YAAY9C,IAGqB0D,UAAWoB,IAAQmC,SAAzD,UACE,cAACzD,EAAA,EAAKK,QAAN,CACEG,SAXmB,SAAUY,GACjCoC,EAAWpC,EAAMpC,OAAOL,QAWpB+E,GAAG,WACHnD,YAAY,eAEd,cAACP,EAAA,EAAKK,QAAQuB,SAAd,CAAuBtB,KAAK,UAA5B,iDAGA,cAACkB,EAAA,EAAD,CAAQlB,KAAK,SAAb,wB,iBCdSqD,GAVF,WACX,OACE,eAAC1B,EAAA,EAAD,CAAM/B,UAAWoB,IAAQzB,KAAzB,UACE,cAAC,EAAD,IACA,cAAC,EAAD,IACA,cAAC,EAAD,QCKS+D,OAVf,WACE,IAAM3I,EAAeiD,aAAY,SAAC9C,GAAD,OAAWA,EAAM+C,MAAMlD,gBAExD,OACE,qBAAKiF,UAAU,MAAf,SACoB,eAAjBjF,EAAgC,cAAC,EAAD,IAAY,cAAC,GAAD,OCCpC4I,I,YAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,QCGdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,CAAU/E,MAAOA,EAAjB,SACE,cAAC,EAAD,UACE,cAAC,GAAD,UAINgF,SAASC,eAAe,SAM1Bb,O","file":"static/js/main.18dff013.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__10Yca\",\"header__logo\":\"Header_header__logo__1i0Rm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"Message_message__33FPt\",\"message__text\":\"Message_message__text__3dJN9\",\"message__timer\":\"Message_message__timer__2JdJ5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login__form\":\"User_login__form__Pr11S\",\"login__btn\":\"User_login__btn__3KX5D\",\"logout__btn\":\"User_logout__btn__2wdew\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messages__container\":\"MessageList_messages__container__15i2T\",\"messages__feed\":\"MessageList_messages__feed__3qv31\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"Login_form__2VD1G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"connect__btn\":\"Target_connect__btn__3RT8G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chatForm\":\"ChatForm_chatForm__3xNu0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat\":\"Chat_chat__1MKgb\"};","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst loginStatus = {\r\n  userName: \"\",\r\n  userTimer: 0,\r\n  userStatus: \"\", //close\r\n  targetName: \"\",\r\n  targetStatus: \"\",\r\n};\r\n\r\nconst loginSlice = createSlice({\r\n  name: \"login\",\r\n  initialState: loginStatus,\r\n  reducers: {\r\n    setUserTimer(state, action) {\r\n      state.userTimer = action.payload;\r\n    },\r\n    setUserName(state, action) {\r\n      state.userName = action.payload;\r\n    },\r\n    setUserStatus(state, action) {\r\n      state.userStatus = action.payload;\r\n      console.log(\"User Status: \" + action.payload);\r\n    },\r\n    setTargetUsername(state, action) {\r\n      state.targetName = action.payload;\r\n    },\r\n    setTargetStatus(state, action) {\r\n      state.targetStatus = action.payload;\r\n      console.log(\"Target Status: \" + action.payload);\r\n    },\r\n  },\r\n});\r\n\r\nexport const loginActions = loginSlice.actions;\r\nexport default loginSlice.reducer;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\n// {\r\n//   id: 1,\r\n//   user: \"user\",\r\n//   interval: 5,\r\n//   message:\r\n//     \"lorem itpsum whas a loveely day inside the country cabin. we didnt know how to cook all the apples we found.\",\r\n// }\r\n\r\nconst chatStatus = {\r\n  chatDuration: 0,\r\n  messages: [],\r\n};\r\n\r\nconst chatSlice = createSlice({\r\n  name: \"chat\",\r\n  initialState: chatStatus,\r\n  reducers: {\r\n    addMessage(state, action) {\r\n      //Add message to the array\r\n      state.messages.push({\r\n        id: state.messages.length++,\r\n        user: action.payload.user,\r\n        interval: action.payload.interval,\r\n        message: action.payload.message,\r\n      });\r\n    },\r\n    removeMessage(state, action) {\r\n      //Remove message from the array\r\n      state.messages = state.messages.filter(\r\n        (item) => item.id !== action.payload\r\n      );\r\n    },\r\n    updateChatDuration(state, action) {\r\n      state.chatDuration = action.payload;\r\n    },\r\n  },\r\n});\r\n\r\nexport const chatActions = chatSlice.actions;\r\nexport default chatSlice.reducer;\r\n","import { createContext, useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { loginActions } from \"../redux store/login-reducer\";\r\nimport { chatActions } from \"../redux store/chat-reducer\";\r\nimport Peer from \"peerjs\";\r\n\r\nconst PeerContext = createContext({\r\n  userConnection: null,\r\n  targetConnection: null,\r\n  connectUser: () => {},\r\n  reconnectUser: () => {},\r\n  disconnectUser: () => {},\r\n  connectTarget: () => {},\r\n  disconnectTarget: () => {},\r\n});\r\n\r\nexport const PeerProvider = function (props) {\r\n  const [userConn, setUserConn] = useState(null);\r\n  const [targetConn, setTargetConn] = useState(null);\r\n  const [connections, setConnection] = useState([]);\r\n\r\n  const dispatch = useDispatch();\r\n  const user = useSelector((state) => state.login.userName);\r\n  const interval = useSelector((state) => state.login.userTimer);\r\n\r\n  const connectUserHandler = (username, interval) => {\r\n    setUserConn(new Peer(username));\r\n\r\n    dispatch(loginActions.setUserName(username));\r\n    dispatch(loginActions.setUserTimer(interval));\r\n  };\r\n  const reconnectUserHander = () => {\r\n    userConn.reconnect();\r\n  };\r\n  const disconnectUserHandler = () => {\r\n    userConn.destroy();\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (userConn === null) return;\r\n    userConn.on(\"open\", function (id) {\r\n      dispatch(loginActions.setUserStatus(\"open\"));\r\n    });\r\n\r\n    userConn.on(\"connection\", function (conn) {\r\n      console.log(conn);\r\n      setConnection((prevConnections) => [...prevConnections, conn]);\r\n    });\r\n\r\n    userConn.on(\"close\", function () {\r\n      dispatch(loginActions.setUserStatus(\"close\"));\r\n    });\r\n\r\n    userConn.on(\"disconnected\", function () {\r\n      dispatch(loginActions.setUserStatus(\"disconnected\"));\r\n    });\r\n\r\n    userConn.on(\"error\", function () {\r\n      dispatch(loginActions.setUserStatus(\"error\"));\r\n    });\r\n  }, [userConn, dispatch]);\r\n\r\n  const connectTargetHandler = (target) => {\r\n    loginActions.setTargetUsername(target);\r\n    let connIndex = connections.findIndex((conn) => conn.peer === target);\r\n    console.log(connIndex);\r\n    if (connIndex !== -1) {\r\n      setTargetConn(connections[connIndex]);\r\n      dispatch(loginActions.setTargetStatus(\"connection\"));\r\n    } else {\r\n      setTargetConn(userConn.connect(target));\r\n    }\r\n  };\r\n  const disconnectTargetHandler = () => {\r\n    targetConn.close();\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (targetConn === null) return;\r\n    targetConn.on(\"data\", function (data) {\r\n      console.log(\"Message Recieved\");\r\n      dispatch(chatActions.addMessage(data));\r\n    });\r\n\r\n    targetConn.on(\"open\", function () {\r\n      dispatch(loginActions.setTargetStatus(\"connection\"));\r\n    });\r\n\r\n    targetConn.on(\"close\", function () {\r\n      dispatch(loginActions.setTargetStatus(\"close\"));\r\n    });\r\n\r\n    targetConn.on(\"error\", function (err) {\r\n      dispatch(loginActions.setTargetStatus(\"error\"));\r\n    });\r\n  }, [targetConn, dispatch]);\r\n\r\n  const sendMessageHandler = function (message) {\r\n    targetConn.send({\r\n      user,\r\n      interval,\r\n      message,\r\n    });\r\n    dispatch(chatActions.addMessage({ message, interval }));\r\n    console.log(\"Message Sent: \" + message);\r\n  };\r\n\r\n  return (\r\n    <PeerContext.Provider\r\n      value={{\r\n        userConnection: userConn,\r\n        targetConnection: targetConn,\r\n        connectUser: connectUserHandler,\r\n        reconnectUser: reconnectUserHander,\r\n        disconnectUser: disconnectUserHandler,\r\n        connectTarget: connectTargetHandler,\r\n        disconnectTarget: disconnectTargetHandler,\r\n        sendMessage: sendMessageHandler,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </PeerContext.Provider>\r\n  );\r\n};\r\n\r\nexport default PeerContext;\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport loginReducer from \"./login-reducer\";\r\nimport chatReducer from \"./chat-reducer\";\r\n\r\nconst store = configureStore({\r\n  reducer: {\r\n    login: loginReducer,\r\n    chat: chatReducer,\r\n  },\r\n});\r\n\r\nexport default store;\r\n","import Form from \"react-bootstrap/Form\";\r\n\r\nconst Username = function (props) {\r\n  return (\r\n    <Form.Group className=\"mb-3\" controlId=\"formUsername\">\r\n      <Form.Label>Username</Form.Label>\r\n      <Form.Control\r\n        type=\"text\"\r\n        name=\"username\"\r\n        value={props.value}\r\n        placeholder=\"Enter username\"\r\n        onChange={props.usernameHandler}\r\n      />\r\n    </Form.Group>\r\n  );\r\n};\r\n\r\nexport default Username;\r\n","import Form from \"react-bootstrap/Form\";\r\n\r\nconst Interval = function (props) {\r\n  return (\r\n    <Form.Group className=\"mb-3\" controlId=\"formTimeout\">\r\n      <Form.Label className=\"text-left\">Clear Message</Form.Label>\r\n      <Form.Select onChange={props.intervalHandler}>\r\n        <option>Interval Time</option>\r\n        <option value=\"5\">5 seconds</option>\r\n        <option value=\"10\">10 seconds</option>\r\n        <option value=\"15\">15 seconds</option>\r\n      </Form.Select>\r\n    </Form.Group>\r\n  );\r\n};\r\n\r\nexport default Interval;\r\n","import { useState, useEffect, useContext } from \"react\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Username from \"./Username\";\r\nimport Interval from \"./Interval\";\r\nimport classes from \"./User.module.css\";\r\nimport { useSelector } from \"react-redux\";\r\nimport PeerContext from \"../../context store/peer-context\";\r\n\r\nconst User = function () {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [interval, setInterval] = useState(\"\");\r\n  const [btnState, setBtnState] = useState(\"login\");\r\n\r\n  const peer = useContext(PeerContext);\r\n  const userStatus = useSelector((state) => state.login.userStatus);\r\n  const userName = useSelector((state) => state.login.userName);\r\n\r\n  useEffect(() => {\r\n    if (userName !== \"\") {\r\n      setUsername(userName);\r\n    }\r\n  }, [userName]);\r\n\r\n  useEffect(() => {\r\n    switch (userStatus) {\r\n      case \"\":\r\n      case \"close\":\r\n      case \"error\":\r\n        setBtnState(\"login\");\r\n        break;\r\n      case \"open\":\r\n      case \"connection\":\r\n        setBtnState(\"logout\");\r\n        break;\r\n      case \"disconnected\":\r\n        setBtnState(\"reconnect\");\r\n        break;\r\n      default:\r\n    }\r\n  }, [userStatus]);\r\n\r\n  const usernameHandler = function (event) {\r\n    setUsername(event.target.value);\r\n  };\r\n\r\n  const intervalHandler = function (event) {\r\n    setInterval(event.target.value);\r\n  };\r\n\r\n  const submitHandler = function (event) {\r\n    event.preventDefault();\r\n\r\n    if (btnState === \"login\") {\r\n      peer.connectUser(username, interval);\r\n    } else if (btnState === \"logout\") {\r\n      peer.disconnectUser();\r\n    } else if (btnState === \"reconnect\") {\r\n      peer.reconnectUser();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Form onSubmit={submitHandler} className={classes.login__form}>\r\n      <Username value={username} usernameHandler={usernameHandler} />\r\n      <Interval intervalHandler={intervalHandler} />\r\n      <Button\r\n        className={classes[`${btnState}__btn`]}\r\n        variant=\"primary\"\r\n        type=\"submit\"\r\n      >\r\n        {btnState}\r\n      </Button>\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default User;\r\n","import Form from \"react-bootstrap/Form\";\r\n\r\nconst TargetUsername = function (props) {\r\n  return (\r\n    <Form.Group className=\"mb-3\" controlId=\"formTarget\">\r\n      <Form.Label className=\"text-left\">Target</Form.Label>\r\n      <Form.Control\r\n        type=\"text\"\r\n        placeholder=\"Target username\"\r\n        value={props.value}\r\n        onChange={props.targetUsernameHandler}\r\n      />\r\n      <Form.Control.Feedback type=\"invalid\">\r\n        The following target is not logged in.\r\n      </Form.Control.Feedback>\r\n    </Form.Group>\r\n  );\r\n};\r\n\r\nexport default TargetUsername;\r\n","import { useState, useContext, useEffect } from \"react\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport TargetUsername from \"./TargetUsername\";\r\nimport classes from \"./Target.module.css\";\r\nimport PeerContext from \"../../context store/peer-context\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst Target = function () {\r\n  const [targetUsername, setTargetUsername] = useState(\"\");\r\n\r\n  const targetName = useSelector((state) => state.login.targetName);\r\n\r\n  useEffect(() => {\r\n    if (targetName !== \"\") {\r\n      setTargetUsername(targetName);\r\n    }\r\n  }, [targetName]);\r\n\r\n  const peer = useContext(PeerContext);\r\n\r\n  const targetUsernameHandler = function (event) {\r\n    setTargetUsername(event.target.value);\r\n  };\r\n\r\n  const submitHandler = function (event) {\r\n    event.preventDefault();\r\n    peer.connectTarget(targetUsername);\r\n  };\r\n\r\n  return (\r\n    <Form onSubmit={submitHandler}>\r\n      <TargetUsername\r\n        value={targetUsername}\r\n        targetUsernameHandler={targetUsernameHandler}\r\n      />\r\n      <Button\r\n        className={classes.connect__btn}\r\n        variant=\"secondary\"\r\n        type=\"submit\"\r\n      >\r\n        Connect\r\n      </Button>\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default Target;\r\n","import Card from \"react-bootstrap/Card\";\r\nimport classes from \"./Login.module.css\";\r\nimport User from \"./User\";\r\nimport Target from \"./Target\";\r\n\r\nconst Login = function () {\r\n  return (\r\n    <Card className={classes.form}>\r\n      <User />\r\n      <Target />\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import Button from \"react-bootstrap/Button\";\r\nimport classes from \"./Header.module.css\";\r\nimport { useContext } from \"react\";\r\nimport PeerContext from \"../../context store/peer-context\";\r\n\r\nconst Header = function () {\r\n  const peer = useContext(PeerContext);\r\n\r\n  const disconnectHandler = function () {\r\n    peer.disconnectTarget();\r\n  };\r\n  return (\r\n    <div className={classes.header}>\r\n      <div className={classes.header__logo}>Logo</div>\r\n      <Button\r\n        className={classes.header__btn}\r\n        variant=\"primary\"\r\n        type=\"button\"\r\n        onClick={disconnectHandler}\r\n      >\r\n        Disconnect\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import Card from \"react-bootstrap/Card\";\r\nimport ProgressBar from \"react-bootstrap/ProgressBar\";\r\nimport classes from \"./Message.module.css\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { chatActions } from \"../../redux store/chat-reducer\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nconst Message = function ({ id, user, message, interval }) {\r\n  const [duration, setDuration] = useState(0);\r\n  const [percentage, setPercentage] = useState(0);\r\n\r\n  const userName = useSelector((state) => state.login.userName);\r\n  const dispatch = useDispatch();\r\n\r\n  const type = user === userName ? \"USER\" : \"TARGET\";\r\n\r\n  useEffect(() => {\r\n    if (duration < interval) {\r\n      setTimeout(() => {\r\n        setDuration((state) => state + 0.5);\r\n        setPercentage((duration / interval) * 100);\r\n      }, 500);\r\n    } else {\r\n      dispatch(chatActions.removeMessage(id));\r\n    }\r\n  }, [duration, interval, id, dispatch]);\r\n\r\n  return (\r\n    <Card className={classes.message}>\r\n      <p>{type}</p>\r\n      <p>{duration}</p>\r\n      <p className={classes.message__text}>{message}</p>\r\n      <ProgressBar now={percentage} className={classes.message__timer} />\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default Message;\r\n","import Message from \"./Message\";\r\nimport classes from \"./MessageList.module.css\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst MessageList = function () {\r\n  const messages = useSelector((state) => state.chat.messages);\r\n  return (\r\n    <div className={classes.messages__container}>\r\n      <div className={classes.messages__feed}>\r\n        {messages.map((msg) => (\r\n          <Message\r\n            key={msg.id}\r\n            id={msg.id}\r\n            user={msg.user}\r\n            message={msg.message}\r\n            interval={msg.interval}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessageList;\r\n","import { useContext } from \"react\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport classes from \"./ChatForm.module.css\";\r\nimport { useState } from \"react\";\r\nimport PeerContext from \"../../context store/peer-context\";\r\n\r\nconst ChatForm = function () {\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const peer = useContext(PeerContext);\r\n\r\n  const textInputHandler = function (event) {\r\n    setMessage(event.target.value);\r\n  };\r\n\r\n  const submitMessageHandler = function (event) {\r\n    event.preventDefault();\r\n    peer.sendMessage(message);\r\n  };\r\n  return (\r\n    <Form onSubmit={submitMessageHandler} className={classes.chatForm}>\r\n      <Form.Control\r\n        onChange={textInputHandler}\r\n        as=\"textarea\"\r\n        placeholder=\"Message...\"\r\n      />\r\n      <Form.Control.Feedback type=\"invalid\">\r\n        Please add text to submit a message\r\n      </Form.Control.Feedback>\r\n      <Button type=\"submit\">Submit</Button>\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default ChatForm;\r\n","import Card from \"react-bootstrap/Card\";\r\nimport Header from \"./Header\";\r\nimport MessageList from \"./MessageList\";\r\nimport ChatForm from \"./ChatForm\";\r\nimport classes from \"./Chat.module.css\";\r\n\r\nconst Chat = function () {\r\n  return (\r\n    <Card className={classes.chat}>\r\n      <Header />\r\n      <MessageList />\r\n      <ChatForm />\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","import \"./App.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport Login from \"./components/Login/Login\";\nimport Chat from \"./components/Chat/Chat\";\nimport { useSelector } from \"react-redux\";\n\nfunction App() {\n  const targetStatus = useSelector((state) => state.login.targetStatus);\n\n  return (\n    <div className=\"App\">\n      {targetStatus !== \"connection\" ? <Login /> : <Chat />}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { PeerProvider } from \"./context store/peer-context\";\nimport { Provider } from \"react-redux\";\nimport store from \"./redux store/index\";\nimport App from \"./App\";\nimport \"./index.css\";\nimport \"./custom.scss\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PeerProvider>\n        <App />\n      </PeerProvider>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}