(this.webpackJsonpChatter=this.webpackJsonpChatter||[]).push([[0],{23:function(e,t,n){e.exports={header:"Header_header__10Yca",header__logo:"Header_header__logo__1i0Rm"}},24:function(e,t,n){e.exports={message:"Message_message__33FPt",message__text:"Message_message__text__3dJN9",message__timer:"Message_message__timer__2JdJ5"}},30:function(e,t,n){e.exports={login__form:"User_login__form__Pr11S",login__btn:"User_login__btn__3KX5D",logout__btn:"User_logout__btn__2wdew"}},31:function(e,t,n){e.exports={messages__container:"MessageList_messages__container__15i2T",messages__feed:"MessageList_messages__feed__3qv31"}},44:function(e,t,n){e.exports={form:"Login_form__2VD1G"}},45:function(e,t,n){e.exports={connect__btn:"Target_connect__btn__3RT8G"}},46:function(e,t,n){e.exports={chatForm:"ChatForm_chatForm__3xNu0"}},47:function(e,t,n){e.exports={chat:"Chat_chat__1MKgb"}},64:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(21),r=n.n(s),o=n(48),i=n(6),u=n(8),l=n(16),j=Object(l.b)({name:"login",initialState:{userName:"",userTimer:0,userStatus:"",targetName:"",targetStatus:""},reducers:{setUserTimer:function(e,t){e.userTimer=t.payload},setUserName:function(e,t){e.userName=t.payload},setUserStatus:function(e,t){e.userStatus=t.payload,console.log("User Status: "+t.payload)},setTargetUsername:function(e,t){e.targetName=t.payload},setTargetStatus:function(e,t){e.targetStatus=t.payload,console.log("Target Status: "+t.payload)}}}),d=j.actions,b=j.reducer,g=Object(l.b)({name:"chat",initialState:{chatDuration:0,messages:[]},reducers:{addMessage:function(e,t){e.messages.push({id:e.messages.length++,user:t.payload.user,interval:t.payload.interval,message:t.payload.message})},removeMessage:function(e,t){e.messages=e.messages.filter((function(e){return e.id!==t.payload}))},updateChatDuration:function(e,t){e.chatDuration=t.payload}}}),f=g.actions,m=g.reducer,O=n(42),_=n.n(O),h=n(1),x=Object(c.createContext)({userConnection:null,targetConnection:null,connectUser:function(){},reconnectUser:function(){},disconnectUser:function(){},connectTarget:function(){},disconnectTarget:function(){}}),p=function(e){var t=Object(c.useState)(null),n=Object(i.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(null),l=Object(i.a)(r,2),j=l[0],b=l[1],g=Object(c.useState)([]),m=Object(i.a)(g,2),O=m[0],p=m[1],v=Object(u.b)(),S=Object(u.c)((function(e){return e.login.userName})),T=Object(u.c)((function(e){return e.login.userTimer}));Object(c.useEffect)((function(){null!==a&&(a.on("open",(function(e){v(d.setUserStatus("open"))})),a.on("connection",(function(e){console.log(e),p((function(t){return[].concat(Object(o.a)(t),[e])}))})),a.on("close",(function(){v(d.setUserStatus("close"))})),a.on("disconnected",(function(){v(d.setUserStatus("disconnected"))})),a.on("error",(function(){v(d.setUserStatus("error"))})))}),[a,v]);Object(c.useEffect)((function(){null!==j&&(j.on("data",(function(e){console.log("Message Recieved"),v(f.addMessage(e))})),j.on("open",(function(){v(d.setTargetStatus("connection"))})),j.on("close",(function(){v(d.setTargetStatus("close"))})),j.on("error",(function(e){v(d.setTargetStatus("error"))})))}),[j,v]);return Object(h.jsx)(x.Provider,{value:{userConnection:a,targetConnection:j,connectUser:function(e,t){s(new _.a(e)),v(d.setUserName(e)),v(d.setUserTimer(t))},reconnectUser:function(){a.reconnect()},disconnectUser:function(){a.destroy()},connectTarget:function(e){d.setTargetUsername(e);var t=O.findIndex((function(t){return t.peer===e}));console.log(t),-1!==t?(b(O[t]),v(d.setTargetStatus("connection"))):b(a.connect(e))},disconnectTarget:function(){j.close()},sendMessage:function(e){j.send({user:S,interval:T,message:e}),v(f.addMessage({message:e,interval:T})),console.log("Message Sent: "+e)}},children:e.children})},v=x,S=Object(l.a)({reducer:{login:b,chat:m}}),T=(n(64),n(65),n(17)),N=n(44),C=n.n(N),U=n(7),y=n(13),M=function(e){return Object(h.jsxs)(U.a.Group,{className:"mb-3",controlId:"formUsername",children:[Object(h.jsx)(U.a.Label,{children:"Username"}),Object(h.jsx)(U.a.Control,{type:"text",name:"username",value:e.value,placeholder:"Enter username",onChange:e.usernameHandler})]})},F=function(e){return Object(h.jsxs)(U.a.Group,{className:"mb-3",controlId:"formTimeout",children:[Object(h.jsx)(U.a.Label,{className:"text-left",children:"Clear Message"}),Object(h.jsxs)(U.a.Select,{onChange:e.intervalHandler,children:[Object(h.jsx)("option",{children:"Interval Time"}),Object(h.jsx)("option",{value:"5",children:"5 seconds"}),Object(h.jsx)("option",{value:"10",children:"10 seconds"}),Object(h.jsx)("option",{value:"15",children:"15 seconds"})]})]})},D=n(30),E=n.n(D),L=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),r=Object(i.a)(s,2),o=r[0],l=r[1],j=Object(c.useState)("login"),d=Object(i.a)(j,2),b=d[0],g=d[1],f=Object(c.useContext)(v),m=Object(u.c)((function(e){return e.login.userStatus})),O=Object(u.c)((function(e){return e.login.userName}));Object(c.useEffect)((function(){""!==O&&a(O)}),[O]),Object(c.useEffect)((function(){switch(m){case"":case"close":case"error":g("login");break;case"open":case"connection":g("logout");break;case"disconnected":g("reconnect")}}),[m]);return Object(h.jsxs)(U.a,{onSubmit:function(e){e.preventDefault(),"login"===b?f.connectUser(n,o):"logout"===b?f.disconnectUser():"reconnect"===b&&f.reconnectUser()},className:E.a.login__form,children:[Object(h.jsx)(M,{value:n,usernameHandler:function(e){a(e.target.value)}}),Object(h.jsx)(F,{intervalHandler:function(e){l(e.target.value)}}),Object(h.jsx)(y.a,{className:E.a["".concat(b,"__btn")],variant:"primary",type:"submit",children:b})]})},w=function(e){return Object(h.jsxs)(U.a.Group,{className:"mb-3",controlId:"formTarget",children:[Object(h.jsx)(U.a.Label,{className:"text-left",children:"Target"}),Object(h.jsx)(U.a.Control,{type:"text",placeholder:"Target username",value:e.value,onChange:e.targetUsernameHandler}),Object(h.jsx)(U.a.Control.Feedback,{type:"invalid",children:"The following target is not logged in."})]})},H=n(45),k=n.n(H),I=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(u.c)((function(e){return e.login.targetName}));Object(c.useEffect)((function(){""!==s&&a(s)}),[s]);var r=Object(c.useContext)(v);return Object(h.jsxs)(U.a,{onSubmit:function(e){e.preventDefault(),r.connectTarget(n)},children:[Object(h.jsx)(w,{value:n,targetUsernameHandler:function(e){a(e.target.value)}}),Object(h.jsx)(y.a,{className:k.a.connect__btn,variant:"secondary",type:"submit",children:"Connect"})]})},G=function(){return Object(h.jsxs)(T.a,{className:C.a.form,children:[Object(h.jsx)(L,{}),Object(h.jsx)(I,{})]})},P=n(23),J=n.n(P),R=function(){var e=Object(c.useContext)(v);return Object(h.jsxs)("div",{className:J.a.header,children:[Object(h.jsx)("div",{className:J.a.header__logo,children:"Logo"}),Object(h.jsx)(y.a,{className:J.a.header__btn,variant:"primary",type:"button",onClick:function(){e.disconnectTarget()},children:"Disconnect"})]})},A=n(49),B=n(24),K=n.n(B),q=function(e){var t=e.id,n=e.user,a=e.message,s=e.interval,r=Object(c.useState)(0),o=Object(i.a)(r,2),l=o[0],j=o[1],d=Object(c.useState)(0),b=Object(i.a)(d,2),g=b[0],m=b[1],O=Object(u.c)((function(e){return e.login.userName})),_=Object(u.b)(),x=n===O?"USER":"TARGET";return Object(c.useEffect)((function(){l<s?setTimeout((function(){j((function(e){return e+.5})),m(l/s*100)}),500):_(f.removeMessage(t))}),[l,s,t,_]),Object(h.jsxs)(T.a,{className:K.a.message,children:[Object(h.jsx)("p",{children:x}),Object(h.jsx)("p",{children:l}),Object(h.jsx)("p",{className:K.a.message__text,children:a}),Object(h.jsx)(A.a,{now:g,className:K.a.message__timer})]})},V=n(31),X=n.n(V),Y=function(){var e=Object(u.c)((function(e){return e.chat.messages}));return Object(h.jsx)("div",{className:X.a.messages__container,children:Object(h.jsx)("div",{className:X.a.messages__feed,children:e.map((function(e){return Object(h.jsx)(q,{id:e.id,user:e.user,message:e.message,interval:e.interval},e.id)}))})})},z=n(46),Q=n.n(z),W=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useContext)(v);return Object(h.jsxs)(U.a,{onSubmit:function(e){e.preventDefault(),s.sendMessage(n)},className:Q.a.chatForm,children:[Object(h.jsx)(U.a.Control,{onChange:function(e){a(e.target.value)},as:"textarea",placeholder:"Message..."}),Object(h.jsx)(U.a.Control.Feedback,{type:"invalid",children:"Please add text to submit a message"}),Object(h.jsx)(y.a,{type:"submit",children:"Submit"})]})},Z=n(47),$=n.n(Z),ee=function(){return Object(h.jsxs)(T.a,{className:$.a.chat,children:[Object(h.jsx)(R,{}),Object(h.jsx)(Y,{}),Object(h.jsx)(W,{})]})};var te=function(){var e=Object(u.c)((function(e){return e.login.targetStatus}));return Object(h.jsx)("div",{className:"App",children:"connection"!==e?Object(h.jsx)(G,{}):Object(h.jsx)(ee,{})})},ne=(n(66),n(67),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))});r.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(u.a,{store:S,children:Object(h.jsx)(p,{children:Object(h.jsx)(te,{})})})}),document.getElementById("root")),ne()}},[[68,1,2]]]);
//# sourceMappingURL=main.18dff013.chunk.js.map