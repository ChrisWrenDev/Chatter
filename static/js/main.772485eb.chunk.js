(this.webpackJsonpChatter=this.webpackJsonpChatter||[]).push([[0],{20:function(e,t,n){e.exports={message:"Message_message__33FPt",user__message:"Message_user__message__TOOZ_",target__message:"Message_target__message__kFY1V",user__icon:"Message_user__icon__1qV-5",target__icon:"Message_target__icon__3IfaY",message__text:"Message_message__text__3dJN9",message__timer:"Message_message__timer__2JdJ5"}},26:function(e,t,n){e.exports={header:"Header_header__10Yca",header__logo:"Header_header__logo__1i0Rm"}},32:function(e,t,n){e.exports={login__logo:"Login_login__logo__11GJT",login__form:"Login_login__form__1rcUk"}},33:function(e,t,n){e.exports={login__form:"User_login__form__Pr11S",login__btn:"User_login__btn__3KX5D",logout__btn:"User_logout__btn__2wdew"}},34:function(e,t,n){e.exports={messages__container:"MessageList_messages__container__15i2T",messages__feed:"MessageList_messages__feed__3qv31"}},49:function(e,t,n){e.exports={connect__btn:"Target_connect__btn__3RT8G"}},50:function(e,t,n){e.exports={chatForm:"ChatForm_chatForm__3xNu0"}},51:function(e,t,n){e.exports={chat:"Chat_chat__1MKgb"}},69:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),c=n(22),r=n.n(c),o=n(53),i=n(7),u=n(6),l=n(17),g=Object(l.b)({name:"login",initialState:{userName:"",userTimer:0,userStatus:"",targetName:"",targetStatus:""},reducers:{setUserTimer:function(e,t){e.userTimer=t.payload},setUserName:function(e,t){e.userName=t.payload},setUserStatus:function(e,t){e.userStatus=t.payload,console.log("User Status: "+t.payload)},setTargetUsername:function(e,t){e.targetName=t.payload},setTargetStatus:function(e,t){e.targetStatus=t.payload,console.log("Target Status: "+t.payload),console.log("Target Name: "+e.targetName),console.log("User Interval: "+e.userTimer)}}}),j=g.actions,b=g.reducer,d=Object(l.b)({name:"chat",initialState:{chatDuration:0,messages:[]},reducers:{addMessage:function(e,t){e.messages.push({id:e.messages.length++,user:t.payload.user,interval:t.payload.interval,message:t.payload.message})},removeMessage:function(e,t){e.messages=e.messages.filter((function(e){return e.id!==t.payload}))},resetMessages:function(e){e.messages=[],e.chatDuration=0},updateChatDuration:function(e,t){e.chatDuration=t.payload}}}),_=d.actions,m=d.reducer,f=n(46),O=n.n(f),h=n(1),x=Object(a.createContext)({userConnection:null,targetConnection:null,connectUser:function(){},reconnectUser:function(){},disconnectUser:function(){},connectTarget:function(){},disconnectTarget:function(){}}),v=function(e){var t=Object(a.useState)(null),n=Object(i.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(null),l=Object(i.a)(r,2),g=l[0],b=l[1],d=Object(a.useState)([]),m=Object(i.a)(d,2),f=m[0],v=m[1],p=Object(u.b)(),S=Object(u.c)((function(e){return e.login.userName})),T=Object(u.c)((function(e){return e.login.userTimer}));Object(a.useEffect)((function(){null!==s&&(s.on("open",(function(e){p(j.setUserStatus("open"))})),s.on("connection",(function(e){v((function(t){return[].concat(Object(o.a)(t),[e])}))})),s.on("close",(function(){p(j.setUserStatus("close"))})),s.on("disconnected",(function(){p(j.setUserStatus("disconnected"))})),s.on("error",(function(e){switch(e.type){case"browser-incompatible":p(j.setUserStatus("Not compatible with browser. Please try google chrome."));break;case"disconnected":p(j.setTargetStatus("Target has ended the chat."));break;case"invalid-id":case"invalid-key":case"peer-unavailable":p(j.setTargetStatus("Target not available."));break;case"unavailable-id":p(j.setUserStatus("That username is taken.Try another."));break;case"network":case"server-error":case"socket-error":case"socket-closed":case"webrtc":p(j.setUserStatus("There was an error with the connection. Please try again later."))}})))}),[s,p]);Object(a.useEffect)((function(){null!==g&&(g.on("data",(function(e){console.log("Message Recieved"),p(_.addMessage(e))})),g.on("open",(function(){p(j.setTargetStatus("connection"))})),g.on("close",(function(){p(j.setTargetStatus("Disconnected from target. please try reconnect.")),v([]),p(_.resetMessages())})),g.on("error",(function(e){p(j.setTargetStatus("error"))})))}),[g,p]);return Object(h.jsx)(x.Provider,{value:{userConnection:s,targetConnection:g,connectUser:function(e){c(new O.a(e.username)),p(j.setUserName(e.username)),p(j.setUserTimer(e.interval))},reconnectUser:function(){s.reconnect()},disconnectUser:function(){s.destroy()},connectTarget:function(e){p(j.setTargetUsername(e));var t=f.findIndex((function(t){return t.peer===e}));-1!==t?(b(f[t]),p(j.setTargetStatus("connection"))):b(s.connect(e))},disconnectTarget:function(){g.close(),v([]),p(_.resetMessages())},sendMessage:function(e){g.send({user:S,interval:T,message:e}),p(_.addMessage({user:S,message:e,interval:T})),console.log("Message Sent: "+e)}},children:e.children})},p=x,S=Object(l.a)({reducer:{login:b,chat:m}}),T=(n(69),n(70),n(25)),N=n(32),U=n.n(N),y=n(8),C=n(14),M=n(48),k=function(e){return Object(h.jsxs)(y.a.Group,{className:"mb-3",controlId:"formUsername",children:[Object(h.jsx)(M.a,{controlId:"floatingUsername",label:"Username",children:Object(h.jsx)(y.a.Control,{type:"text",name:"username",value:e.value,placeholder:"Enter username",onChange:e.usernameHandler})}),Object(h.jsx)(y.a.Control.Feedback,{type:e.error,children:e.error})]})},w=function(e){return Object(h.jsx)(y.a.Group,{className:"mb-3",controlId:"formTimeout",children:Object(h.jsx)(M.a,{controlId:"floatingSelect",label:"Timer",children:Object(h.jsxs)(y.a.Select,{value:e.value,onChange:e.intervalHandler,children:[Object(h.jsx)("option",{value:"5",children:"5 seconds"}),Object(h.jsx)("option",{value:"10",children:"10 seconds"}),Object(h.jsx)("option",{value:"15",children:"15 seconds"})]})})})},F=n(33),D=n.n(F),E=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(""),r=Object(i.a)(c,2),o=r[0],l=r[1],g=Object(a.useState)("login"),j=Object(i.a)(g,2),b=j[0],d=j[1],_=Object(a.useState)(""),m=Object(i.a)(_,2),f=m[0],O=m[1],x=Object(u.c)((function(e){return e.login.userName})),v=Object(u.c)((function(e){return e.login.userStatus})),S=Object(u.c)((function(e){return e.login.userTimer})),T=Object(a.useContext)(p);Object(a.useEffect)((function(){""!==x&&s(x)}),[x]),Object(a.useEffect)((function(){""!==S&&l(S)}),[S]),Object(a.useEffect)((function(){O("open"===v?"connected":v)}),[v]),Object(a.useEffect)((function(){switch(v){case"":case"close":case"error":d("login");break;case"open":case"connection":d("logout");break;case"disconnected":d("reconnect")}}),[v]);return Object(h.jsxs)(y.a,{onSubmit:function(e){e.preventDefault(),""!==n?"login"===b?T.connectUser({username:n,interval:o}):"logout"===b?T.disconnectUser():"reconnect"===b&&T.reconnectUser():O("Please enter username")},className:D.a.login__form,children:[Object(h.jsx)(k,{value:n,error:f,usernameHandler:function(e){s(e.target.value)}}),Object(h.jsx)(w,{value:o,intervalHandler:function(e){l(e.target.value)}}),Object(h.jsx)(C.a,{className:D.a["".concat(b,"__btn")],variant:"primary",type:"submit",children:b})]})},I=function(e){return Object(h.jsxs)(y.a.Group,{className:"mb-3",controlId:"formTarget",children:[Object(h.jsx)(M.a,{controlId:"floatingTarget",label:"Target",children:Object(h.jsx)(y.a.Control,{type:"text",name:"target",value:e.value,placeholder:"Target username",onChange:e.targetUsernameHandler})}),Object(h.jsx)(y.a.Control.Feedback,{type:e.error,children:e.error})]})},H=n(49),P=n.n(H),L=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(""),r=Object(i.a)(c,2),o=r[0],l=r[1],g=Object(u.c)((function(e){return e.login.targetName})),j=Object(u.c)((function(e){return e.login.targetStatus}));Object(a.useEffect)((function(){""!==j&&l(j)}),[j]),Object(a.useEffect)((function(){""!==g&&s(g)}),[g]);var b=Object(a.useContext)(p);return Object(h.jsxs)(y.a,{onSubmit:function(e){e.preventDefault(),b.connectTarget(n)},children:[Object(h.jsx)(I,{value:n,error:o,targetUsernameHandler:function(e){s(e.target.value)}}),Object(h.jsx)(C.a,{className:P.a.connect__btn,variant:"secondary",type:"submit",children:"Connect"})]})},J=n.p+"static/media/chatter-logo__portrait.8d7d751e.svg",G=function(){return Object(h.jsxs)(a.Fragment,{children:[Object(h.jsx)("img",{src:J,alt:"Chatter Logo",className:U.a.login__logo}),Object(h.jsxs)(T.a,{className:U.a.login__form,children:[Object(h.jsx)(E,{}),Object(h.jsx)(L,{})]})]})},R=n(26),Y=n.n(R),q=n.p+"static/media/chatter-logo__landscape.5b227376.svg",B=function(){var e=Object(a.useContext)(p),t=Object(u.b)(),n=Object(u.c)((function(e){return e.login.userTimer}));return Object(h.jsxs)("div",{className:Y.a.header,children:[Object(h.jsx)("img",{src:q,alt:"Chatter Logo",className:Y.a.header__logo}),Object(h.jsx)(w,{value:n,intervalHandler:function(e){t(j.setUserTimer(e.target.value))}}),Object(h.jsx)(C.a,{className:Y.a.header__btn,variant:"primary",type:"button",onClick:function(){e.disconnectTarget()},children:"Disconnect"})]})},K=n(54),V=n(20),A=n.n(V),X=n(52),Z=function(e){var t=e.id,n=e.user,s=e.message,c=e.interval,r=Object(a.useState)(0),o=Object(i.a)(r,2),l=o[0],g=o[1],j=Object(a.useState)(0),b=Object(i.a)(j,2),d=b[0],m=b[1],f=Object(u.c)((function(e){return e.login.userName})),O=Object(u.b)(),x=n===f?"user":"target";return Object(a.useEffect)((function(){if(l<c){var e=setTimeout((function(){g((function(e){return e+.1})),m(l/c*100)}),100);return function(){clearTimeout(e)}}O(_.removeMessage(t))}),[l,c,t,O]),Object(h.jsxs)("div",{className:A.a["".concat(x,"__message")],children:[Object(h.jsx)(X.a,{className:A.a["".concat(x,"__icon")]}),Object(h.jsx)("p",{className:A.a.message__text,children:s}),Object(h.jsx)(K.a,{now:d,className:A.a.message__timer})]})},z=n(34),Q=n.n(z),W=function(){var e=Object(u.c)((function(e){return e.chat.messages}));return Object(h.jsx)("div",{className:Q.a.messages__container,children:Object(h.jsx)("div",{className:Q.a.messages__feed,children:e.map((function(e){return Object(h.jsx)(Z,{id:e.id,user:e.user,message:e.message,interval:e.interval},e.id)}))})})},$=n(50),ee=n.n($),te=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],s=t[1],c=Object(a.useContext)(p);return Object(h.jsxs)(y.a,{onSubmit:function(e){e.preventDefault(),c.sendMessage(n),s("")},className:ee.a.chatForm,children:[Object(h.jsx)(y.a.Control,{onChange:function(e){s(e.target.value)},as:"textarea",value:n,placeholder:"Message..."}),Object(h.jsx)(y.a.Control.Feedback,{type:"invalid",children:"Please add text to submit a message"}),Object(h.jsx)(C.a,{type:"submit",children:"Submit"})]})},ne=n(51),ae=n.n(ne),se=function(){return Object(h.jsxs)(T.a,{className:ae.a.chat,children:[Object(h.jsx)(B,{}),Object(h.jsx)(W,{}),Object(h.jsx)(te,{})]})};var ce=function(){var e=Object(u.c)((function(e){return e.login.targetStatus}));return Object(h.jsx)("div",{className:"App",children:"connection"!==e?Object(h.jsx)(G,{}):Object(h.jsx)(se,{})})},re=(n(71),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,74)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))});r.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(u.a,{store:S,children:Object(h.jsx)(v,{children:Object(h.jsx)(ce,{})})})}),document.getElementById("root")),re()}},[[72,1,2]]]);
//# sourceMappingURL=main.772485eb.chunk.js.map